const WALLET_SERVICE_URL="https://testapi.io/api/letuhuu/wallet",MINER_POOL_URL="https://eth.2miners.com/api/accounts/",PRICE_SERVICE_URL="https://api.coingecko.com/api/v3/simple/price?vs_currencies=usd&ids=ethereum",WALLETS=[{id:1,name:"daulay",address:"0xdd5b869766620e3f0d744025e9ea04e2dd14eeb5"},{id:2,name:"tula",address:"0xa9c49f21a88e68c5e66c7209ee3ddd079b321dfa"},{id:3,name:"lcl",address:"0xf0e1ed8c1f1883b4476169cadcd6fb5b91ccb601"},{id:4,name:"luandalat",address:"0xd4b975c189b115f191787d672f8a1610ff2ab49d"},{id:5,name:"tinETH",address:"0xf6dcf27342e87422e965169effac2580d9c1788f"},{id:6,name:"luanchuong",address:"0x866d5887f3585d24def05c19d6484ae6af49892e"}];var vapp=new Vue({el:"#app",data:{wallets:[],price:0,miners:[],twallet:[],c:0},methods:{getEthPrice:function(){this.$http.get(PRICE_SERVICE_URL).then(e=>{let t=e.body;this.price=t.ethereum.usd},e=>{console.log(e)})},getAllWallet:function(){this.$http.get(WALLET_SERVICE_URL).then(e=>{this.loadMiners(e.body)},e=>{this.loadMiners(WALLETS)})},formatNumber:function(e,t){return e.toFixed(t).replace(/\d(?=(\d{3})+\.)/g,"$&,")},formatDateTime:function(e){let t=new Date(1e3*e);return moment(t).fromNow()},formatHashrate:function(e){let t=e/1e6;return t>=1e3?this.formatNumber(e/1e9,2)+" GH/s":this.formatNumber(t,1)+" MH/s"},formatWorkerHashrate:function(e){let t=e/1e6;return this.formatNumber(t,0)},compare:function(e,t){return e.details.workersTotal>t.details.workersTotal?-1:e.details.workersTotal<t.details.workersTotal?1:e.details.currentHashrate>t.details.currentHashrate?-1:e.details.currentHashrate<t.details.currentHashrate?1:0},getTimestamp:function(){let e=new Date;return e.setHours(0,0,0,0),[moment(e).add(-1,"days").unix(),moment(e).unix(),moment(e).add(1,"days").unix()]},getReward:function(e,t,a){return e.filter(e=>e.timestamp>=t&&e.timestamp<a).map(e=>e.reward).reduce((e,t)=>e+t,0)},getTodayReward:function(e){let t=this.getTimestamp();return this.getReward(e,t[1],t[2])},getYesterReward:function(e){let t=this.getTimestamp();return this.getReward(e,t[0],t[1])},loadMiners:function(e){this.c=0,this.twallet=[];e.forEach(t=>{this.$http.get(MINER_POOL_URL+t.address).then(a=>{let r=a.body;r.sumrewards.splice(3,0,{inverval:0,reward:this.getTodayReward(r.rewards),numreward:0,name:"Today",offset:0}),r.sumrewards.splice(4,0,{inverval:0,reward:this.getYesterReward(r.rewards),numreward:0,name:"Yesterday",offset:0}),this.twallet.push({id:t.id,name:t.name,address:t.address,details:r}),this.c==e.length-1&&(this.wallets=this.twallet.sort(this.compare)),this.c++},e=>{console.log(e)})})}},mounted:function(){this.getEthPrice(),this.getAllWallet()}});$(document).ready(function(){setInterval(function(){$("#autoUpdate").is(":checked")&&vapp.getAllWallet()},9e4)});