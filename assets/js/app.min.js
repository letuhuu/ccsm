const WALLET_SERVICE_URL="https://5d073b61fa00250014577c37.mockapi.io/wallet",MINER_POOL_URL="https://eth.2miners.com/api/accounts/",PRICE_SERVICE_URL="https://api.coingecko.com/api/v3/simple/price?vs_currencies=usd&ids=ethereum";var vapp=new Vue({el:"#app",data:{wallets:[],price:0,miners:[],twallet:[],c:0},methods:{getEthPrice:function(){this.$http.get(PRICE_SERVICE_URL).then(e=>{let t=e.body;this.price=t.ethereum.usd},e=>{console.log(e)})},getAllWallet:function(){this.$http.get(WALLET_SERVICE_URL).then(e=>{let t=e.body;this.c=0,this.twallet=[];t.forEach(e=>{this.$http.get(MINER_POOL_URL+e.address).then(r=>{let a=r.body;a.sumrewards.splice(3,0,{inverval:0,reward:this.getTodayReward(a.rewards),numreward:0,name:"Today",offset:0}),a.sumrewards.splice(4,0,{inverval:0,reward:this.getYesterReward(a.rewards),numreward:0,name:"Yesterday",offset:0}),this.twallet.push({id:e.id,name:e.name,address:e.address,details:a}),this.c==t.length-1&&(this.wallets=this.twallet.sort(this.compare)),this.c++},e=>{console.log(e)})})},e=>{console.log(e)})},formatNumber:function(e,t){return e.toFixed(t).replace(/\d(?=(\d{3})+\.)/g,"$&,")},formatDateTime:function(e){let t=new Date(1e3*e);return moment(t).fromNow()},formatHashrate:function(e){let t=e/1e6;return t>=1e3?this.formatNumber(e/1e9,2)+" GH/s":this.formatNumber(t,1)+" MH/s"},compare:function(e,t){return e.details.workersTotal>t.details.workersTotal?-1:e.details.workersTotal<t.details.workersTotal?1:e.details.currentHashrate>t.details.currentHashrate?-1:e.details.currentHashrate<t.details.currentHashrate?1:0},getTimestamp:function(){let e=new Date;return e.setHours(0,0,0,0),[moment(e).add(-1,"days").unix(),moment(e).unix(),moment(e).add(1,"days").unix()]},getReward:function(e,t,r){return e.filter(e=>e.timestamp>=t&&e.timestamp<r).map(e=>e.reward).reduce((e,t)=>e+t,0)},getTodayReward:function(e){let t=this.getTimestamp();return this.getReward(e,t[1],t[2])},getYesterReward:function(e){let t=this.getTimestamp();return this.getReward(e,t[0],t[1])}},mounted:function(){this.getEthPrice(),this.getAllWallet()}});$(document).ready(function(){setInterval(function(){$("#autoUpdate").is(":checked")&&vapp.getAllWallet()},9e4)});